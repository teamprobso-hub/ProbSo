<!doctype html>
<html lang="hi">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>ProbSo - Single Page</title>
<link rel="stylesheet" href="style.css">
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
</head>
<body>

<header class="header">
  <button id="menuBtn" class="icon-btn">‚ò∞</button>
  <div class="logo">ProbSo</div>
  <div class="header-right">
    <button id="notifBtn" class="icon-btn">üîî<span id="notifBadge" class="badge hidden">0</span></button>
    <button id="msgBtn" class="icon-btn">‚úâÔ∏è<span id="msgBadge" class="badge hidden">0</span></button>
  </div>
</header>
<main id="mainContent">
  <!-- Dynamic content (like profile.html) yahan load hoga -->
</main>
<script type="module">
function loadPage(page){
  fetch(page)
    .then(res=>res.text())
    .then(html=>{
      document.getElementById('mainContent').innerHTML = html;
      // Module scripts ko re-run karne ke liye
      const scripts = document.getElementById('mainContent').querySelectorAll('script[type="module"]');
      scripts.forEach(oldScript=>{
        const newScript = document.createElement('script');
        newScript.type = 'module';
        newScript.textContent = oldScript.textContent;
        document.body.appendChild(newScript);
      });
    });
}

// Example: profile button click
document.getElementById('openProfileBtn').addEventListener('click', ()=>{
  loadPage('profile.html'); // yahan aapka profile.html ka path
});
</script>

<main class="container">

  <!-- Top Card: Profile -->
  <section class="card top-card">
    <div class="profile-left">
      <img id="profileImage" class="avatar" src="https://via.placeholder.com/80" alt="Profile" />
    </div>
    <div class="profile-center">
      <div id="profileName" class="name">Guest User</div>
      <div id="profilePoints" class="small-text">Points: 0</div>
    </div>
    <div class="profile-right">
      <button id="loginLogoutBtn" class="primary-btn">Login / Sign Up</button>
    </div>
  </section>

  <!-- Controls -->
  <section class="card control-card">
    <div class="control-row"><button id="openProfileBtn" class="flat-btn">Profile</button></div>
    <div class="control-row"><button id="notificationsBtn" class="flat-btn">Notifications</button><button id="messagesBtn" class="flat-btn">Messages</button></div>
    <div class="control-row"><button id="groupsBtn" class="flat-btn">Groups</button><button id="categoryBtn" class="flat-btn">Category</button></div>
  </section>

  <!-- Post Composer -->
  <section class="card post-card">
    <div class="card-title">Post Your Problem / Request</div>
    <textarea id="postText" class="auto-resize textarea" placeholder="Write Your Problem or Request to Get Help..."></textarea>
    <div class="row">
      <label class="file-btn"><input id="fileInput" type="file" style="display:none"/>Choose File</label>
      <select id="categorySelect">
        <option value="">Select Category</option>
        <option>Emergency</option>
        <option>Find Partner</option>
        <option>Buy / Sell</option>
        <option>Education</option>
        <option>Find Job</option>
        <option>Business</option>
        <option>Other</option>
      </select>
      <button id="locBtn" class="flat-btn">Add Location</button>
      <button id="postBtn" class="primary-btn">Post</button>
    </div>
    <div id="selectedLocation" class="small-text muted"></div>
  </section>

  <!-- Feed -->
  <section class="card feed-card">
    <div class="card-title">Feed</div>
    <div class="search-row"><input id="feedSearch" placeholder="Search..."/><button id="feedSearchBtn" class="flat-btn">Search</button></div>
    <div class="filter-row"><button id="filterBtn" class="flat-btn">Filter</button><div style="flex:1"></div><button id="refreshFeedBtn" class="flat-btn">Refresh Feed</button></div>
    <div id="feedList" class="feed-list"></div>
  </section>

</main>

<!-- Login Modal -->
<div id="loginModal" class="modal hidden">
  <div class="modal-content split">
    <div>
      <h3>Email / Password</h3>
      <input id="emailInput" placeholder="Email"/>
      <input id="pwdInput" type="password" placeholder="Password"/>
      <div class="row">
        <button id="emailLoginBtn" class="primary-btn">Login</button>
        <button id="emailSignupBtn" class="flat-btn">Sign Up</button>
      </div>
      <div class="or">OR</div>
      <button id="googleLoginBtn" class="primary-btn">Login with Google</button>
    </div>
    <button id="closeLogin" class="close-modal">‚úñ</button>
  </div>
</div>

<div id="toast" class="toast hidden"></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script type="module" src="app.js"></script>
</body>
</html>